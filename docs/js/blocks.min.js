(()=>{"use strict";var t;!function(t){t.goods="goods",t.sp="sp",t.tff="tff",t.contacts="contacts"}(t||(t={}));const e="https://jsonplaceholder.typicode.com",s={shops:{goods:`${e}/goods`,test:`${e}/todos/1`}};class o{constructor(){this.selector=".popup",this.popupCloseSelector=".popup__close",this.dataAttributePopup="[data-popup]",this.dataAttributeClosePopup="[data-close-popup]",this.popupOpenClass="popup--open",this.overflowClass="overflow",this.popupOverlayClass="popup__overlay",this.init()}init(){this.handlers(),[768,1200].forEach((t=>{window.matchMedia(`(min-width:${t}px)`).addListener((t=>this.breakpointChecker(t)))}))}breakpointChecker(t){const e=t.media.replace(/\D/g,"");Array.from(document.querySelectorAll(`${this.selector}--open`)).forEach((t=>{const s=t.dataset.media;Number(e)>=Number(s)&&this.closePopup(t)}))}openPopup(t){const e=document.getElementById(t.dataset.popup||"");if(!e)throw new Error(`no attribute value: ${this.dataAttributePopup}`);{let t=!0;const s=Number(e.dataset.media);s&&s<window.innerWidth&&(t=!1),t&&(e.classList.add(this.popupOpenClass),document.body.classList.add(this.overflowClass),document.dispatchEvent(new CustomEvent("openPopup",{detail:null==e?void 0:e.id})))}}checkOpenedPopups(){return[...document.querySelectorAll(this.selector)].some((t=>t.classList.contains("popup--open")))}closePopup(t){var e;const s=t.closest(this.selector)||document.getElementById((null===(e=null==t?void 0:t.dataset)||void 0===e?void 0:e.closePopup)||"");null==s||s.classList.remove(this.popupOpenClass),this.checkOpenedPopups()||document.body.classList.remove(this.overflowClass),document.dispatchEvent(new CustomEvent("closePopup",{detail:null==s?void 0:s.id}))}clickHandler(t){const e=t.target;return e.closest(this.dataAttributeClosePopup)&&e.closest(this.dataAttributePopup)?(this.closePopup(e),this.openPopup(e.closest(this.dataAttributePopup))):e.classList.contains(this.popupOverlayClass)||e.closest(this.popupCloseSelector)||e.closest(this.dataAttributeClosePopup)?this.closePopup(e):void(e.closest(this.dataAttributePopup)&&this.openPopup(e.closest(this.dataAttributePopup)))}handlers(){document.addEventListener("click",(t=>this.clickHandler(t)))}}class i{constructor(){this.selectorActionBtn=".header__nav-more",this.selectorUsefulLinks=".useful-links",this.selectorUsefulLinksCross=".useful-links__title-cross";const t=document.querySelector(this.selectorUsefulLinks);t&&(this.usefulLinksElem=t),this.usefulLinksElem&&this.init()}init(){window.matchMedia("(min-width:1200px)").addListener((t=>this.breakpointChecker(t))),this.handlers()}breakpointChecker(t){this.usefulLinksElem.classList.contains("active")&&(t.matches?document.body.classList.remove("overflow"):document.body.classList.add("overflow"))}toggle(){this.usefulLinksElem.classList.toggle("active"),document.body.classList.toggle("overflow")}clickHandler(t){const e=t.target;(e.closest(this.selectorActionBtn)||e.closest(this.selectorUsefulLinksCross))&&this.toggle()}handlers(){document.addEventListener("click",(t=>this.clickHandler(t)))}}class n{constructor(t,e,s){this.selectorForm=t,this.url=e,this.apiOptions=s;const o=document.querySelector(this.selectorForm);o&&(this.form=o),this.form&&this.init()}init(){this.handlers()}getData(){const t=new FormData(this.form);return Array.from(t.entries()).reduce(((t,[e,s])=>(t[e]=s,t)),{})}submitForm(){return t=this,e=void 0,o=function*(){const t=this.getData(),{method:e}=this.apiOptions;let s=this.url;if("get"===e){const e=new URLSearchParams;Object.entries(t).forEach((([t,s])=>e.append(t,String(s)))),s=`${this.url}?${e.toString()}`}else this.apiOptions=Object.assign(Object.assign({},this.apiOptions),{body:JSON.stringify(t)});return yield((t,e)=>{return s=void 0,o=void 0,n=function*(){try{const s=yield fetch(t,Object.assign({credentials:e.credentials||"include",headers:"get"===e.method?{}:{"Content-Type":"application/json"}},e)),{status:o}=s,i=yield s.json();return i.detail?{error:i.detail,status:o}:{data:i,status:o}}catch(t){return{error:t}}},new((i=void 0)||(i=Promise))((function(t,e){function c(t){try{l(n.next(t))}catch(t){e(t)}}function r(t){try{l(n.throw(t))}catch(t){e(t)}}function l(e){var s;e.done?t(e.value):(s=e.value,s instanceof i?s:new i((function(t){t(s)}))).then(c,r)}l((n=n.apply(s,o||[])).next())}));var s,o,i,n})(s,this.apiOptions)},new((s=void 0)||(s=Promise))((function(i,n){function c(t){try{l(o.next(t))}catch(t){n(t)}}function r(t){try{l(o.throw(t))}catch(t){n(t)}}function l(t){var e;t.done?i(t.value):(e=t.value,e instanceof s?e:new s((function(t){t(e)}))).then(c,r)}l((o=o.apply(t,e||[])).next())}));var t,e,s,o}validateForm(){}resetForm(){}handlers(){this.form.addEventListener("submit",(t=>{t.preventDefault(),this.submitForm()}))}}class c{constructor(){this.selectorContainer=".login",this.selectorBtnSignIn=".login__choice-sign-in",this.selectorBtnSignUp=".login__choice-sign-up";const t=document.querySelector(this.selectorContainer);t&&(this.containerElem=t);const e=document.querySelector(this.selectorBtnSignIn);e&&(this.btnSignInElem=e);const s=document.querySelector(this.selectorBtnSignUp);s&&(this.btnSignUpElem=s),this.btnSignInElem&&this.btnSignUpElem?this.init():console.error(`No items found: ${this.selectorBtnSignIn}, ${this.selectorBtnSignUp}`)}init(){this.handlers()}toggle(t){t.closest(this.selectorBtnSignIn)?(this.containerElem.classList.remove(`${this.selectorContainer.substring(1)}--sign-up`),this.containerElem.classList.add(`${this.selectorContainer.substring(1)}--sign-in`)):(this.containerElem.classList.remove(`${this.selectorContainer.substring(1)}--sign-in`),this.containerElem.classList.add(`${this.selectorContainer.substring(1)}--sign-up`))}clickHandler(t){const e=t.target;(e.closest(this.selectorBtnSignIn)||e.closest(this.selectorBtnSignUp))&&this.toggle(e)}handlers(){document.addEventListener("click",(t=>this.clickHandler(t)))}}class r{constructor(){this.addressSelector=".location__address",this.addressSelectedSelector=`${this.addressSelector}--selected`,this.addressRemoveSelector=`${this.addressSelector}-remove`,this.addressElems=Array.from(document.querySelectorAll(this.addressSelector)),this.init()}init(){this.handlers()}selectedAddress(t){this.addressElems.forEach((e=>{e.classList.remove(this.addressSelectedSelector.substring(1)),e===t&&e.classList.add(this.addressSelectedSelector.substring(1))}))}removeAddress(t){t.remove();const e=t.dataset.value;console.log("value",e)}clickHandler(t){const e=t.target,s=e.closest(this.addressSelector),o=e.closest(this.addressRemoveSelector);if(o&&s)return this.removeAddress(s);s&&!o&&this.selectedAddress(s)}handlers(){document.addEventListener("click",(t=>this.clickHandler(t)))}}window.addEventListener("load",(()=>{!function(t){let e=new Image;e.onload=e.onerror=function(){!function(t){let e=!0===t?"webp":"no-webp";document.documentElement.classList.add(e)}(2==e.height)},e.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA"}();try{new o}catch(t){console.log(t)}try{new i}catch(t){console.log(t)}try{new n(".login__form-sign-in",s.shops.test,{method:"post"})}catch(t){console.log(t)}try{new n(".login__form-sign-up",s.shops.test,{method:"post"})}catch(t){console.log(t)}try{new c}catch(t){console.log(t)}try{new r}catch(t){console.log(t)}})),window.addEventListener("load",(()=>{}))})();