(()=>{"use strict";class e{constructor(){this.selector=".popup",this.popupCloseSelector=".popup__close",this.dataAttributePopup="[data-popup]",this.popupOpenClass="popup--open",this.overflowClass="overflow",this.popupOverlayClass="popup__overlay",this.init()}init(){this.handlers(),[768,1200].forEach((e=>{window.matchMedia(`(min-width:${e}px)`).addListener((e=>this.breakpointChecker(e)))}))}breakpointChecker(e){const t=e.media.replace(/\D/g,"");Array.from(document.querySelectorAll(`${this.selector}--open`)).forEach((e=>{const o=e.dataset.media;Number(t)>=Number(o)&&this.closePopup(e)}))}openPopup(e){const t=document.getElementById(e.dataset.popup||"");if(!t)throw new Error(`no attribute value: ${this.dataAttributePopup}`);{let e=!0;const o=Number(t.dataset.media);if(o&&o<window.innerWidth&&(e=!1),e){t.classList.add(this.popupOpenClass),document.body.classList.add(this.overflowClass);const e=document.querySelector(".shop-preview__actions");e&&e.classList.add("shop-preview__actions--over")}}}closePopup(e){const t=e.closest(this.selector);document.dispatchEvent(new CustomEvent("closePopup",{detail:null==t?void 0:t.id})),null==t||t.classList.remove(this.popupOpenClass),document.body.classList.remove(this.overflowClass);const o=document.querySelector(".shop-preview__actions");o&&o.classList.remove("shop-preview__actions--over")}clickHandler(e){const t=e.target;if(t.classList.contains(this.popupOverlayClass)||t.closest(this.popupCloseSelector))return this.closePopup(t);t.closest(this.dataAttributePopup)&&this.openPopup(t.closest(this.dataAttributePopup))}handlers(){document.addEventListener("click",(e=>this.clickHandler(e)))}}window.addEventListener("load",(()=>{!function(e){let t=new Image;t.onload=t.onerror=function(){!function(e){let t=!0===e?"webp":"no-webp";document.documentElement.classList.add(t)}(2==t.height)},t.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA"}();try{new e}catch(e){console.log(e)}})),window.addEventListener("load",(()=>{}))})();