(()=>{"use strict";class t{constructor(){this.selector=".popup",this.popupCloseSelector=".popup__close",this.dataAttributePopup="[data-popup]",this.dataAttributeClosePopup="[data-close-popup]",this.popupOpenClass="popup--open",this.overflowClass="overflow",this.popupOverlayClass="popup__overlay",this.init()}init(){this.handlers(),[768,1200].forEach((t=>{window.matchMedia(`(min-width:${t}px)`).addListener((t=>this.breakpointChecker(t)))}))}breakpointChecker(t){const e=t.media.replace(/\D/g,"");Array.from(document.querySelectorAll(`${this.selector}--open`)).forEach((t=>{const o=t.dataset.media;Number(e)>=Number(o)&&this.closePopup(t)}))}openPopup(t){const e=document.getElementById(t.dataset.popup||"");if(!e)throw new Error(`no attribute value: ${this.dataAttributePopup}`);{let t=!0;const o=Number(e.dataset.media);if(o&&o<window.innerWidth&&(t=!1),t){e.classList.add(this.popupOpenClass),document.body.classList.add(this.overflowClass);const t=document.querySelector(".shop-preview__actions");t&&t.classList.add("shop-preview__actions--over")}}}closePopup(t){var e;const o=t.closest(this.selector)||document.getElementById((null===(e=null==t?void 0:t.dataset)||void 0===e?void 0:e.closePopup)||"");document.dispatchEvent(new CustomEvent("closePopup",{detail:null==o?void 0:o.id})),null==o||o.classList.remove(this.popupOpenClass),t.classList.contains("not-overflow")||document.body.classList.remove(this.overflowClass);const s=document.querySelector(".shop-preview__actions");s&&s.classList.remove("shop-preview__actions--over")}clickHandler(t){const e=t.target;if(e.classList.contains(this.popupOverlayClass)||e.closest(this.popupCloseSelector)||e.closest(this.dataAttributeClosePopup))return this.closePopup(e);e.closest(this.dataAttributePopup)&&this.openPopup(e.closest(this.dataAttributePopup))}handlers(){document.addEventListener("click",(t=>this.clickHandler(t)))}}window.addEventListener("load",(()=>{!function(t){let e=new Image;e.onload=e.onerror=function(){!function(t){let e=!0===t?"webp":"no-webp";document.documentElement.classList.add(e)}(2==e.height)},e.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA"}();try{new t}catch(t){console.log(t)}})),window.addEventListener("load",(()=>{}))})();